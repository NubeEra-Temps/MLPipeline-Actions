name: checking ML functionalities

on: [workflow_dispatch]
env:
  APPLICATION_NAME: startupapp
jobs:
  lint:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v1

      - name: Set up Python
        run: echo "pythonLocation=/opt/hostedtoolcache/Python/3.12.4/x64" >> $GITHUB_ENV

      - name: Use Python Location
        run: echo "Python is located at $pythonLocation"

      - name: Setup Python environment
        uses: actions/setup-python@v2

      - name: Install requirements
        run: pip install -- quiet -- requirement requirements.txt

      - name: Lint code
        run: |
          flake8 -- ignore=E501, E231 *. py
          pylint -- disable=C0301 -- disable=C0326 *. py

      - name: Run unit tests
        run: |
          python -m unittest -- verbose -- failfast

      - name: Find Value for secrets.ML_SERVICE_ACCT_KEY variable
        run:  |
          echo "________________________________________________"
          echo "Value is    ${{ secrets.ML_SERVICE_ACCT_KEY }}"
          echo "________________________________________________"
